{"remainingRequest":"/Users/panyiming/Documents/code/Movie recommdation system/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/panyiming/Documents/code/Movie recommdation system/vue/src/views/Pages/AccountSettingsIDConfirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/panyiming/Documents/code/Movie recommdation system/vue/src/views/Pages/AccountSettingsIDConfirm.vue","mtime":1647751340000},{"path":"/Users/panyiming/Documents/code/Movie recommdation system/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panyiming/Documents/code/Movie recommdation system/vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/panyiming/Documents/code/Movie recommdation system/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panyiming/Documents/code/Movie recommdation system/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaUFsZXJ0T3V0bGluZSwgbWRpQ2xvdWRVcGxvYWRPdXRsaW5lIH0gZnJvbSAnQG1kaS9qcycKaW1wb3J0IHtkb2lkb2NyfSBmcm9tICIuLi8uLi9hcGkvdXBsb2FkIjsKaW1wb3J0IHtpZGNvbmZpcm19IGZyb20gIi4uLy4uL2FwaS91c2VyIjsKaW1wb3J0IG1peGluIGZyb20gIi4uLy4uL21peGlucy9taXhpbnMiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6eyB9LAogIG1peGluczogW21peGluXSwKICBwcm9wczogewogICAgYWNjb3VudERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwKICAgIH0sCiAgfSwKICBkYXRhIDogKCkgPT4gKHsKICAgIGZpbGVzOiBbXSwKICAgIGlkbnVtIDogJycsCiAgICBuYW1lIDonJywKICAgIGljb25zOiB7CiAgICAgIG1kaUFsZXJ0T3V0bGluZSwKICAgICAgbWRpQ2xvdWRVcGxvYWRPdXRsaW5lLAogICAgfSwKICAgIGlkY2FyZEltYWdlOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvaWQtY2FyZC5wbmcnKQogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAvLyBEZXRlcm1pbmUgdGhlIFVSTCB0byBzaG93LCB0eXBpY2FsbHkgZnJvbSBhbiBvYmplY3QgcmVwcmVzZW50aW5nIGEgdXNlcgogICAgdXJsICgpIHsKICAgICAgcmV0dXJuICdodHRwczovL3JhbmRvbXVzZXIubWUvYXBpL3BvcnRyYWl0cy9tZW4vMS5qcGcnCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewoKICB9LAogIG1ldGhvZHM6ewogICAgcmVzZXRGb3JtKCl7CiAgICAgIHRoaXMuaWRudW0gPSAnJwogICAgICB0aGlzLm5hbWUgPSAnJwogICAgfSwKICAgIGdldEltYWdlcyhlbCl7CiAgICAgIGNvbnN0IGZpbGUgPSBlbC50YXJnZXQuZmlsZXNbMF0KICAgICAgLy8gY29uc29sZS5sb2coZmlsZSkKICAgICAgY29uc3QgdHlwZSA9IGZpbGUudHlwZS5zcGxpdCgiLyIpWzBdCiAgICAgIGlmICh0eXBlID09PSAiaW1hZ2UiKXsKICAgICAgICBkb2lkb2NyKGZpbGUpLnRoZW4ocmVzPT57CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgIHRoaXMuaWRudW0gPSByZXMuZGF0YS5kYXRhLmlkbm8KICAgICAgICAgIHRoaXMubmFtZSA9IHJlcy5kYXRhLmRhdGEubmFtZQogICAgICAgICAgdGhpcy5pZGNhcmRJbWFnZSA9IHRoaXMuc2VydmVySW1nKHJlcy5kYXRhLmRhdGEucGljKQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5pZGNhcmRJbWFnZSkKICAgICAgICB9KQogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLiRzbmFja2Jhcih7Y29udGVudDogJ+WPquiDveS4iuS8oOWbvueJh+agvOW8jycsIHRvcDp0cnVlLCBjZW50ZXI6dHJ1ZSwgY29sb3I6J3JlZCcsbXVsdGlMaW5lOiB0cnVlfSkKICAgICAgfQogICAgfSwKICAgIHNhdmUoKXsKICAgICAgaWRjb25maXJtKHsnaWQnOiB0aGlzLnVpZCwgJ2lkbm8nOiB0aGlzLmlkbnVtLCAncmVhbG5hbWUnOiB0aGlzLm5hbWV9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy4kc25hY2tiYXIoe2NvbnRlbnQ6ICfmm7TmlrDmiJDlip8nLCB0b3A6dHJ1ZSwgY2VudGVyOnRydWUsIGNvbG9yOidncmVlbicsbXVsdGlMaW5lOiB0cnVlfSkKICAgICAgICAvLwogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgfSkKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["AccountSettingsIDConfirm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountSettingsIDConfirm.vue","sourceRoot":"src/views/Pages","sourcesContent":["<template>\n  <v-card\n      flat\n      class=\"pa-3 mt-2\"\n  >\n    <v-card-text class=\"d-flex\">\n      <v-avatar\n          rounded\n          size=\"120\"\n          width=\"120\"\n          height=\"80\"\n          class=\"me-6\">\n        <v-img :src=\"idcardImage\"></v-img>\n      </v-avatar>\n\n      <!-- upload photo -->\n      <div>\n        <v-btn\n            color=\"primary\"\n            class=\"me-3 mt-5\"\n            @click=\"$refs.refInputEl.click()\"\n        >\n          <v-icon class=\"d-sm-none\">\n            {{ icons.mdiCloudUploadOutline }}\n          </v-icon>\n          <span class=\"d-none d-sm-block\">上传身份证</span>\n        </v-btn>\n\n        <input\n            ref=\"refInputEl\"\n            type=\"file\"\n            accept=\".jpeg,.png,.jpg,GIF\"\n            :hidden=\"true\"\n            @change=\"getImages\"\n        />\n\n        <v-btn\n            color=\"error\"\n            outlined\n            class=\"mt-5\"\n        >\n          重置\n        </v-btn>\n        <p class=\"text-sm mt-5\">\n          允许 JPG, GIF 和 PNG. 不大于  800K\n        </p>\n      </div>\n    </v-card-text>\n\n    <v-card-text>\n      <v-form class=\"multi-col-validation mt-6\">\n        <v-row>\n\n          <v-col\n              md=\"6\"\n              cols=\"12\"\n          >\n            <v-text-field\n                v-model=\"name\"\n                label=\"姓名\"\n                dense\n                outlined\n                disabled\n            ></v-text-field>\n          </v-col>\n\n          <v-col\n              md=\"6\"\n              cols=\"12\"\n          >\n            <v-text-field\n                v-model=\"idnum\"\n                label=\"身份证号码\"\n                dense\n                outlined\n                disabled\n            ></v-text-field>\n          </v-col>\n\n          <!-- alert -->\n          <v-col cols=\"12\">\n            <v-alert\n                color=\"warning\"\n                text\n                class=\"mb-0\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"warning\">\n                  {{ icons.mdiAlertOutline }}\n                </v-icon>\n\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    必须点击保存后，身份认证数据才会传到系统后台.\n                  </p>\n                  <a\n                      href=\"javascript:void(0)\"\n                      class=\"text-decoration-none warning--text\"\n                  >\n                    <span class=\"text-sm\">特别注意</span>\n                  </a>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n\n          <v-col cols=\"12\">\n            <v-btn\n                color=\"primary\"\n                class=\"me-3 mt-4\"\n                @click.prevent=\"save\"\n            >\n              保存修改\n            </v-btn>\n            <v-btn\n                color=\"secondary\"\n                outlined\n                class=\"mt-4\"\n                type=\"reset\"\n                @click.prevent=\"resetForm\"\n            >\n              取消\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { mdiAlertOutline, mdiCloudUploadOutline } from '@mdi/js'\nimport {doidocr} from \"../../api/upload\";\nimport {idconfirm} from \"../../api/user\";\nimport mixin from \"../../mixins/mixins\";\n\nexport default {\n  components:{ },\n  mixins: [mixin],\n  props: {\n    accountData: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data : () => ({\n    files: [],\n    idnum : '',\n    name :'',\n    icons: {\n      mdiAlertOutline,\n      mdiCloudUploadOutline,\n    },\n    idcardImage: require('@/assets/images/id-card.png')\n  }),\n  computed: {\n    // Determine the URL to show, typically from an object representing a user\n    url () {\n      return 'https://randomuser.me/api/portraits/men/1.jpg'\n    }\n  },\n  mounted() {\n\n  },\n  methods:{\n    resetForm(){\n      this.idnum = ''\n      this.name = ''\n    },\n    getImages(el){\n      const file = el.target.files[0]\n      // console.log(file)\n      const type = file.type.split(\"/\")[0]\n      if (type === \"image\"){\n        doidocr(file).then(res=>{\n          // console.log(res.data)\n          this.idnum = res.data.data.idno\n          this.name = res.data.data.name\n          this.idcardImage = this.serverImg(res.data.data.pic)\n          console.log(this.idcardImage)\n        })\n      }else{\n        this.$snackbar({content: '只能上传图片格式', top:true, center:true, color:'red',multiLine: true})\n      }\n    },\n    save(){\n      idconfirm({'id': this.uid, 'idno': this.idnum, 'realname': this.name}).then(()=>{\n        this.$snackbar({content: '更新成功', top:true, center:true, color:'green',multiLine: true})\n        //\n        // console.log(res)\n      })\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n"]}]}